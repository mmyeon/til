---
title: "자주 쓰는 Git 명령어"
tags: ["Git"]
cover: solve.jpg
author: mmyeon
---

### 왜 Git을 사용하는가

원하는 시점(버전)으로 이동할 수 있기 때문이다.

### 중요한 역할을 하는 커밋

⭕ 커밋은 스냅사진이다.

⭕ 커밋에는 변경 사항만 부분적으로 저장되는 게 아니라 변경된 부분을 포함한 전체 코드가 담겨있다.

---

### Git으로 관리하는 파일의 4가지 상태

| 파일상태  |                           |
| --------- | ------------------------- |
| untracked | 한번도 커밋되지 않은 상태 |
| tracked   | 수정 없음                 |
|           | 수정함                    |
|           | 스테이지됨                |

### `git add`에서 `git push`까지 과정

- 파일 변경 / 파일 추가 -> `git add`로 스테이지에 올림. 커밋을 할 수 있는 상태됨 -> `git commit`으로 하나의 스냅샷, 버전 만들기 -> `git push`로 원격 저장소에 올리기

---

### 브랜치

- [main] = Git이 제공하는 기본 브랜치
- 브랜치 = 포인터
- 브랜치가 포인터이기 때문에 그저 커밋을 가리키는 것만으로도 분기를 만들 수 있다. 포인터인 브랜치가 없었더라면 프로젝트를 통째로 복사해야 해서 무겁고 시간이 많이 걸리게 된다.
- 여러 브랜치 사이를 넘나들 수 있는 이유도 `HEAD`라는 포인터가 있기 때문이다. 타임머신 역할을 해주는 게 바로 이 `HEAD` 포인터다.
- 브랜치와 헤드가 떨어지는 경우는 'Detached HEAD' 상태가 된다.
- 각자의 브랜치에서 개발하다가 각각 개발이 완료되면 [main] 브랜치에 작업하던 브랜치 작업물을 합치면 된다.
- [main] 브랜치에 병합된 브랜치는 지우기

---

### 협업을 위한 규칙 예시

- [main] 브랜치에는 직접 커밋을 올리지 않는다.(동시 작업시 꼬일 수 있음)
- 기능 개발을 하기 전에 [main] 브랜치를 기준으로 새로운 브랜치를 만든다.
- 이 브랜치 이름은 [feature/기능이름] 형식으로 하고 한 명만 커밋을 올린다.
- [feature/기능이름] 브랜치에서 기능 개발이 끝나면 [main] 브랜치에 이를 합친다.

---

### HEAD

- 해당 브랜치에서 가장 마지막에 만들어진 커밋을 가리킨다.
- 그 브랜치의 마지막 커밋의 스냅샷이라고 생각하면 된다.
- 다음에 만들어질 커밋의 부모가 된다.

---

### 병합 = 두 버전의 합집합을 구하기

| merge 방식   | 특이 사항                                                                 |
| ------------ | ------------------------------------------------------------------------- |
| merge commit | 새로운 상태니까 새롭게 저장해야함 - 두 브랜치를 합치면서 병합 커밋이 생김 |
| fast-forward | 마지막 상태와 동일하니까 마지막으로 상태로 변경해주면 됨                  |
| conflict     | 충돌 난 부분 확인하고 무엇을 남길지 수동으로 선택하기                     |

---

### 전체 커밋 내역 확인

`$ git log`

### 원하는 커밋으로 돌아가기 = 타임머신

`$ git checkout 커밋아이디(앞자리 7자리)`

### 최신 커밋으로 가기

`$ git checkout -`

### 원격 저장소의 코드와 버전 전체를 로컬에 내려받기

- 현재 폴더에 파일만 받을 때

`$ git clone 원격저장소 주소 .`

- 새로운 폴더로 받을 때

`$ git clone 원격저장소 주소`

### 원격저장소의 변경사항(새로운 커밋) 로컬에 갱신하기

`$ git pull origin main`

### 브랜치 만들기

- 브랜치 만들기 전에 base 브랜치로 확인하기

`$ git branch 브랜치이름`

### 브랜치 이동하기

`$ git checkout 브랜치이름`

### 브랜치와 브랜치 병합하기

- 기준이 되는 브랜치(보통 main)로 체크아웃한 뒤 진행하기

`$ git merge 합치고 싶은 브랜치이름`

- 원격저장소에 반영하기

`$ git push`

### 충돌 해결

- 협업하다가 똑같은 코드를 고쳤을 때 발생한다.
- ⭐ 병합할 때 동료들과 같이 쓰는 [main]브랜치에 병합하지 말고 나 혼자 쓰는 [개인브랜치]에서 먼저 병합해보는 습관 들이기. 문제 생기면 나 혼자 영향받도록! ⭐

`$ git checkout 개인브랜치`
<br>

`$ git merge main`

- 병합된 커밋이 문제가 없을 때 [main]브랜치에 반영하기
- 충돌 발생
- 충돌난 파일 수정해서 병합 다시 진행하기
- 병합이 문제 없으면 [main]브랜치로 이동해서 [main]브랜치를 베이스로 다시 병합하기

### 브랜치를 합치는 좋은 방법 = 풀 리퀘스트

- [main] 브랜치에는 완벽한 코드만 둬야 한다.
- `pull request` = 협력자에게 병합을 요청하는 메세지는 보내는 것
- 새로운 브랜치 만들어서 커밋 -> 원격 저장소에 푸쉬하면 GitHub 원격저장소에 [Compare & pull request] 버튼이 생성된다.
- `pull request` 하면 원격저장소에는 병합이 된 상태다. 로컬 저장소에도 반영해야 한다.
- `$ git checkout main` , `$ git pull` 을 통해 로컬 저장소와 원격 저장소가 같은 커밋을 가리키게 한다.

### 개발 완료! 출시하자 = 릴리즈

| 프로그램 버전     | 특징                                    |
| ----------------- | --------------------------------------- |
| 메이저 업그레이드 | 사용자들이 크게 느낄 변화, v2.x -> v3.x |
| 마이너 업그레이트 | 작은 변화의 경우. v.2.3 -> v.2.4        |

### git add 취소 - unstaged로 변경

`$ git reset HEAD 파일이름`

### git commit 취소

### git push 취소

---

### 참고

책 - 팀 개발을 위한 Git, GitHub 시작하기

[[Git] git add 취소하기, git commit 취소하기, git push 취소하기 - Heee's Development Blog](https://gmlwjd9405.github.io/2018/05/25/git-add-cancle.html)

[Git - Reset Demystified](https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified)
